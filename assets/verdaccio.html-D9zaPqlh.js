import{_ as d}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r,o as p,c as h,e as t,w as n,b as e,d as a,a as l}from"./app-BTKEWSw3.js";const m="/blog/assets/img-A3WMDAO0.png",u="/blog/assets/img_1-Dfw2cJi7.png",v="/blog/assets/img_2-DegbNz1e.png",g="/blog/assets/img_3-On3CELJZ.png",b="/blog/assets/img_4-GZKf6MBL.png",_={},k=l('<h1 id="verdaccio" tabindex="-1"><a class="header-anchor" href="#verdaccio"><span>Verdaccio</span></a></h1><h2 id="私有npm库的特点" tabindex="-1"><a class="header-anchor" href="#私有npm库的特点"><span>私有npm库的特点</span></a></h2><ul><li>私有npm仓库可以搭建在局域网内，不对外开放</li><li>对于发布和下载npm包可以进行权限管理</li><li>私有npm仓库可以管理私有包，不用上传到公共的npm仓库中</li><li>缓存下载过的npm包，再次下载的时候可以大大加快下载速度</li><li>对于私有包走私有仓库，下载过的包走缓存，为下载的包走公共仓库</li></ul><h2 id="verdaccio-是什么" tabindex="-1"><a class="header-anchor" href="#verdaccio-是什么"><span>verdaccio 是什么</span></a></h2><p>官网给出的简介：<code>Verdaccio</code>是一个Node.js创建的轻量级的私有<code>npm proxy registry</code></p><p>verdaccio是fork的sinopia，后者是最初的搭建私有npm的选择，不过已经好多年不维护了，而verdaccio则是从sinopia衍生出来并且一直在维护中的，所以verdaccio是更好的选择</p><ul><li>它是基于Node.js的网页应用程序</li><li>它是私有npm registry</li><li>它是本地网络proxy</li><li>它是可插入式应用程序</li><li>它相当容易安装和使用</li><li>我们提供Docker和Kubernetes支持</li><li>它与yarn, npm 和pnpm 100% 兼容</li><li>它forked于sinopia@1.4.0并且100% 向后兼容。</li></ul><h2 id="verdaccio-的搭建" tabindex="-1"><a class="header-anchor" href="#verdaccio-的搭建"><span>Verdaccio 的搭建</span></a></h2><h3 id="全局安装" tabindex="-1"><a class="header-anchor" href="#全局安装"><span>全局安装</span></a></h3>',9),y=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"npm"),a(),e("span",{class:"token function"},"install"),a(),e("span",{class:"token parameter variable"},"-g"),a(` verdaccio
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),f=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"yarn"),a(" global "),e("span",{class:"token function"},"add"),a(` verdaccio
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),x=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"pnpm"),a(),e("span",{class:"token function"},"add"),a(),e("span",{class:"token parameter variable"},"-g"),a(` verdaccio
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),A=l('<p><img src="'+m+`" alt=""></p><h3 id="docker-镜像" tabindex="-1"><a class="header-anchor" href="#docker-镜像"><span>Docker 镜像</span></a></h3><p>安装完成后，你只需要执行CLI命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>verdaccio
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>会输出如下结果：</p><p><img src="`+u+'" alt=""></p>',6),V=e("code",null,"verdaccio",-1),C={href:"https://verdaccio.org/zh-cn/docs/configuration/",target:"_blank",rel:"noopener noreferrer"},D=l(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>dingyongya<span class="token punctuation">\\</span>AppData<span class="token punctuation">\\</span>Roaming<span class="token punctuation">\\</span>verdaccio<span class="token punctuation">\\</span>config.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),N={href:"http://localhost:4873",target:"_blank",rel:"noopener noreferrer"},T=e("code",null,"verdaccio",-1),j=l('<p><img src="'+v+`" alt=""></p><h3 id="登录到私有仓库上" tabindex="-1"><a class="header-anchor" href="#登录到私有仓库上"><span>登录到私有仓库上</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> adduser <span class="token parameter variable">--registry</span> http://localhost:4873
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+g+`" alt=""></p><p>然后回到浏览器登录</p><h3 id="发布-npm-包到私有仓库" tabindex="-1"><a class="header-anchor" href="#发布-npm-包到私有仓库"><span>发布 npm 包到私有仓库</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> publish <span class="token parameter variable">--registry</span> http://localhost:4873
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+b+'" alt=""></p><h3 id="从私有仓库中下载私有包" tabindex="-1"><a class="header-anchor" href="#从私有仓库中下载私有包"><span>从私有仓库中下载私有包</span></a></h3>',9),Z=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token function"},"npm"),a(),e("span",{class:"token function"},"install"),a(),e("span",{class:"token parameter variable"},"--registry"),a(` http://localhost:4873
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),z=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token assign-left variable"},"registry"),e("span",{class:"token operator"},"="),a(`http://localhost:4873
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),w=e("div",{class:"language-bash line-numbers-mode","data-ext":"sh","data-title":"sh"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token punctuation"},"{"),a(`
  `),e("span",{class:"token string"},'"publishConfig"'),e("span",{class:"token builtin class-name"},":"),a(),e("span",{class:"token punctuation"},"{"),a(`
    `),e("span",{class:"token string"},'"registry"'),e("span",{class:"token builtin class-name"},":"),a(),e("span",{class:"token string"},'"http://localhost:4873"'),a(`
  `),e("span",{class:"token punctuation"},"}"),a(`
`),e("span",{class:"token punctuation"},"}"),a(`
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),L={href:"https://verdaccio.org/zh-CN/docs/cli-registry",target:"_blank",rel:"noopener noreferrer"},M=l(`<h3 id="缓存-npm-公共包" tabindex="-1"><a class="header-anchor" href="#缓存-npm-公共包"><span>缓存 npm 公共包</span></a></h3><p>配置好私有仓库之后，每次我们下载公共包的时候，会自动把包文件缓存在</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code> C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>dingyongya<span class="token punctuation">\\</span>AppData<span class="token punctuation">\\</span>Roaming<span class="token punctuation">\\</span>verdaccio<span class="token punctuation">\\</span>storage
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>私有包也是会存在storage这个文件夹下面的，当公共包被缓存之后，再次下载的时候，会首先在这个仓库中获取，大大的加速了包文件的下载速度，但是verdaccio官网上面显示缓存的过期时间默认是2分钟，如果想避免缓存的话可以在config.yml中设置 cache：false</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>uplinks:
  npmjs:
    url: https://registry.npmjs.org/
    cache: <span class="token boolean">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5);function B(E,I){const o=r("CodeTabs"),c=r("ExternalLinkIcon");return p(),h("div",null,[k,t(o,{id:"90",data:[{id:"npm"},{id:"yarn"},{id:"pnpm"}],active:0,"tab-id":"shell"},{title0:n(({value:s,isActive:i})=>[a("npm")]),title1:n(({value:s,isActive:i})=>[a("yarn")]),title2:n(({value:s,isActive:i})=>[a("pnpm")]),tab0:n(({value:s,isActive:i})=>[y]),tab1:n(({value:s,isActive:i})=>[f]),tab2:n(({value:s,isActive:i})=>[x]),_:1}),A,e("p",null,[a("其中第一行是 "),V,a(" 配置文件的目录，相关配置都在config.yaml中进行配置，"),e("a",C,[a("verdaccio配置文件文档"),t(c)])]),D,e("p",null,[e("a",N,[a("http://localhost:4873"),t(c)]),a(" 为 "),T,a(" 客户端的访问地址")]),j,t(o,{id:"147",data:[{id:"registry"},{id:".npmrc"},{id:"package.json"}],"tab-id":"shell"},{title0:n(({value:s,isActive:i})=>[a("registry")]),title1:n(({value:s,isActive:i})=>[a(".npmrc")]),title2:n(({value:s,isActive:i})=>[a("package.json")]),tab0:n(({value:s,isActive:i})=>[Z]),tab1:n(({value:s,isActive:i})=>[z]),tab2:n(({value:s,isActive:i})=>[w]),_:1}),e("p",null,[a("如需其他配置，请阅读 "),e("a",L,[a("使用私有 registry"),t(c)]),a("部分。")]),M])}const P=d(_,[["render",B],["__file","verdaccio.html.vue"]]),R=JSON.parse('{"path":"/tool/verdaccio.html","title":"Verdaccio","lang":"zh-CN","frontmatter":{"date":"2022-11-28T00:00:00.000Z","category":["tool","verdaccio"],"tag":["npm 私有库"],"description":"Verdaccio 私有npm库的特点 私有npm仓库可以搭建在局域网内，不对外开放 对于发布和下载npm包可以进行权限管理 私有npm仓库可以管理私有包，不用上传到公共的npm仓库中 缓存下载过的npm包，再次下载的时候可以大大加快下载速度 对于私有包走私有仓库，下载过的包走缓存，为下载的包走公共仓库 verdaccio 是什么 官网给出的简介：Ve...","head":[["meta",{"property":"og:url","content":"https://dyywork.github.io/blog/tool/verdaccio.html"}],["meta",{"property":"og:site_name","content":"莫名点"}],["meta",{"property":"og:title","content":"Verdaccio"}],["meta",{"property":"og:description","content":"Verdaccio 私有npm库的特点 私有npm仓库可以搭建在局域网内，不对外开放 对于发布和下载npm包可以进行权限管理 私有npm仓库可以管理私有包，不用上传到公共的npm仓库中 缓存下载过的npm包，再次下载的时候可以大大加快下载速度 对于私有包走私有仓库，下载过的包走缓存，为下载的包走公共仓库 verdaccio 是什么 官网给出的简介：Ve..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-28T02:38:38.000Z"}],["meta",{"property":"article:author","content":"Mr.Ding"}],["meta",{"property":"article:tag","content":"npm 私有库"}],["meta",{"property":"article:published_time","content":"2022-11-28T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-28T02:38:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Verdaccio\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-11-28T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-28T02:38:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Ding\\"}]}"]]},"headers":[{"level":2,"title":"私有npm库的特点","slug":"私有npm库的特点","link":"#私有npm库的特点","children":[]},{"level":2,"title":"verdaccio 是什么","slug":"verdaccio-是什么","link":"#verdaccio-是什么","children":[]},{"level":2,"title":"Verdaccio 的搭建","slug":"verdaccio-的搭建","link":"#verdaccio-的搭建","children":[{"level":3,"title":"全局安装","slug":"全局安装","link":"#全局安装","children":[]},{"level":3,"title":"Docker 镜像","slug":"docker-镜像","link":"#docker-镜像","children":[]},{"level":3,"title":"登录到私有仓库上","slug":"登录到私有仓库上","link":"#登录到私有仓库上","children":[]},{"level":3,"title":"发布 npm 包到私有仓库","slug":"发布-npm-包到私有仓库","link":"#发布-npm-包到私有仓库","children":[]},{"level":3,"title":"从私有仓库中下载私有包","slug":"从私有仓库中下载私有包","link":"#从私有仓库中下载私有包","children":[]},{"level":3,"title":"缓存 npm 公共包","slug":"缓存-npm-公共包","link":"#缓存-npm-公共包","children":[]}]}],"git":{"createdTime":1669614970000,"updatedTime":1714271918000,"contributors":[{"name":"dingyongya","email":"yahya_dyy@163.com","commits":2}]},"readingTime":{"minutes":2.21,"words":663},"filePathRelative":"tool/verdaccio.md","localizedDate":"2022年11月28日","excerpt":"\\n<h2>私有npm库的特点</h2>\\n<ul>\\n<li>私有npm仓库可以搭建在局域网内，不对外开放</li>\\n<li>对于发布和下载npm包可以进行权限管理</li>\\n<li>私有npm仓库可以管理私有包，不用上传到公共的npm仓库中</li>\\n<li>缓存下载过的npm包，再次下载的时候可以大大加快下载速度</li>\\n<li>对于私有包走私有仓库，下载过的包走缓存，为下载的包走公共仓库</li>\\n</ul>\\n<h2>verdaccio 是什么</h2>\\n<p>官网给出的简介：<code>Verdaccio</code>是一个Node.js创建的轻量级的私有<code>npm proxy registry</code></p>","autoDesc":true}');export{P as comp,R as data};
